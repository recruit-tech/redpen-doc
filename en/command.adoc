[[commands]]
== RedPen Commands

RedPen provides both a simple standalone command line tool and a server.

[[command-line-tool]]
=== Command line tool

RedPen provides a simple command line tool called 'redpen' to check documents.

NOTE: When you download RedPen `tar.gz` file from release page, plese execute the following commands in the top of expanded directory and adding `bin/` prefix.

[[usage-redpen]]
==== Using redpen

Use the redpen command as follows:

[source,bash]
------------------------------
$ redpen [options] input-files
------------------------------

You can specify more than one file. Separate the file names with single-byte spaces.

[[options]]
==== Options

The redpen command has the following options:

[suppress]
===== To specify the RedPen configuration file

----
-c <CONFIG_FILE>, --configuration <CONFIG_FILE>
----

If you do not specify a configuration file with the -c option, RedPen first searches for and loads the configuration file ``redpen-conf.xml`` in the current directory. If ``redpen-conf.xml`` does not exist in the current directory, RedPen loads the localized setting file ``redpen-conf-**{lang}**.xml`` in the current directory, where {lang} is the language code as defined in ISO 639-1. The language codes are determined by the locale setting of the userâ€™s computer. If there is no localized setting file, RedPen loads the configuration file in ``$REDPEN_HOME/conf``.

===== To specify the input file format [**default**: plain]

----
-f <INPUT_FORMAT>, --format <INPUT_FORMAT>
----

This argument specifies the input format. Currently, RedPen supports the following formats:

[options="header",]
|====
|Value      |Description
|plain      |Plain text format
|wiki       |Wiki (Textile) format
|markdown   |Markdown format
|asciidoc   |AsciiDoc format
|review     |Re:VIEW format
|latex      |LaTeX format
|properties |Java property file format
|rest       |reStructuredText format
|====

NOTE: If you do not specify the input format with `-f`, RedPen determines the format from the file extensions. The table below shows the list of file extensions recognised by RedPen.

[options="header",]
|====
|Value      |Extension
|plain      |txt
|wiki       |wiki
|markdown   |md, markdown
|asciidoc   |adoc, asciidoc
|review     |re, review
|latex      |tex, latex
|properties |properties
|rest       |reStructuredText
|====

===== To specify the result format [**default**: plain]

----
option:: -r <RESULT_FORMAT>, --result_format <RESULT_FORMAT>
----

This option determines the output format. Currently RedPen supports the following output formats:

[options="header"]
|====
|Value  |Description
|plain  |Plain text format
|plain2 |Alternative plain text format with errors collated by sentence
|xml    |xml format
|json   |json format
|json2  |Alternative json format with errors collated by sentence
|====

===== To specify the permitted number of errors [**default**: 1]

The redpen command returns 0 if the number of errors is lower than the specified number.

----
option:: -l <LIMIT NUMBER>, --limit  <LIMIT NUMBER>
----

===== To specify the language of error messages  [**default**: locale setting of the machine]

You can choose to display error messages in English (en) or Japanese (ja).

----
option:: -L <LANGUAGE>,--lang <LANGUAGE>
----

===== To specify input sentences

You can check an individual sentence rather than a whole file.

----
option:: -s <INPUT SENTENCE>, --sentence  <INPUT SENTENCE>
----

===== To display help

----
-h, --help
----

===== To display the RedPen version

----
--version
----

[[sample-server]]
=== RedPen server

RedPen also provides a server function. RedPen server provides a UI and a practical REST API (see the <<server>> section for details).
The following is a screenshot of the RedPen server UI:

image:redpen-ui.png[Image]

[[usage-redpen-server]]
==== To use redpen-server

You can start and stop RedPen server by using the following command:

[source,bash]
----------------------------
$ redpen-server [start|stop]
----------------------------

[[configuration]]
==== Configuration

You can configure the redpen-server command by editing the variables in the 
*redpen-server* file. The following table shows the configurable settings
and their default values:

[options="header",]
|=======================================================================
|Configuration    |Default Value |Description
|REDPEN_PORT      |8080          |Specifies the port number of RedPen server.
|STOP_KEY         |redpen.stop   |Specifies a stop key for RedPen server. This means that you can stop the server via http. If you do not want to allow this, comment out this setting.
|REDPEN_CONF_FILE |              |Specifies the default redpen config file.
|REDPEN_LANGUAGE  |Depends on locale setting |Specifies the language in which RedPen error messages are displayed.
|=======================================================================

For more details on RedPen server functions, refer to the <<server>> section.

[[main-configuration]]
== RedPen Configuration

The RedPen configuration file consists of two separate blocks.
One block lists and configures the RedPen validators that are used when checking files.
The other block controls how characters and symbols are handled in the checked files.

[[configuration-file]]
=== Configuration file

The RedPen configuration file contains all of the settings that RedPen requires
in order to check files.
The configuration file is an xml file with a root element of **redpen-conf**.
Within this element there are two sub-elements named "validators" and "symbols."

To apply the default validators and symbol settings for a particular language,
specify the appropriate *lang* attribute in the *redpen-conf* element.

The *validators* section specifies which validators are used when checking files.
Each *validator* has its own properties, with default values for each property.
You can change these defaults by explicitly specifying the properties and values in this section.

The *symbols* section specifies which symbols are allowed for a particular language
(the language specified by the *lang* attribute). You only need to include the *symbols* section
if you want to override the default settings.
The following is an example of a RedPen configuration file:

[source,xml]
----
<redpen-conf lang="en">
    <validators>
        <validator name="SentenceLength">
            <property name="max_len" value="200"/>
        </validator>
        <validator name="InvalidSymbol" />
        <validator name="SpaceWithSymbol" />
        <validator name="SectionLength">
            <property name="max_num" value="2000"/>
        </validator>
        <validator name="ParagraphNumber" />
    </validators>
    <symbols>
         <symbol name="EXCLAMATION_MARK" value="!" invalid-chars="！" after-space="true" />
         <symbol name="COMMA" value="," invalid-chars="、，" after-space="true" />
    </symbols>
</redpen-conf>
----

For a detailed description of how to configure validators, refer to
<<validator-configuration,Configuring validators>>.
For a detailed description of how to configure symbols, refer to
<<setting-symbols,Setting symbols>>.

[[validator-configuration]]
[suppress='WeakExpression']
=== Configuring validators

The first section in the RedPen configuration file is called "validators".
In this section, you specify which validators are applied when RedPen checks a file.
You can also specify properties and values to modify how the validators are applied.

[source,xml]
----
<validators>
    <validator name="SentenceLength">
        <property name="max_len" value="200"/>
    </validator>
    <validator name="InvalidSymbol" level="info"/>
    <validator name="SpaceWithSymbol" />
    <validator name="SectionLength" level="warn">
        <property name="max_num" value="2000"/>
    </validator>
    <validator name="ParagraphNumber" />
 </validators>
----

The "validators" section contains one **validator** element for each validator to be applied
when checking a file.
You specify the name of the validator in the **name** attribute of the **validator** element.
Each validator is responsible for inspecting a particular aspect of the checked file.
For example, if you specify the "SectionLength" validator in the configuration file,
RedPen measures the length of each **section** in the checked file.

Some validator components can be configured using "property" elements.
For example, by default "SectionLength" reports any section that is longer than 1,000 characters,
but you can change this by specifying a "max_num" property with a different value.

You can specify different levels of severity for the errors detected by each validator using
the **level** attribute.
For example, the error level of "InvalidSymbol" in the above example is set to "info".

For detailed descriptions of all validators, refer to <<validator,RedPen Validators>>.

[[setting-symbols]]
=== Setting symbols

NOTE: RedPen only checks symbols if the *InvalidSymbol* validator is specified, and
only checks spaces before or after symbols if the *SymbolWithSpace* validator is specified.

The *lang* attribute of the *redpen-conf* element determines how various
symbols are handled by RedPen. RedPen specifies default symbols for English ("en")
and Japanese ("ja"). These are described in
<<default-settings-for-english,Default settings for English>> and
<<default-settings-for-japanese,Default settings for Japanese>>, respectively.

You can override the default symbol settings for a particular language
by configuring a *symbols* section in the RedPen configuration file.

The default settings are described in the sections below. In the
*symbols* configuration section you can use *symbol* elements to specify
which symbols are or are not allowed when checking files.

The table below lists the properties of a *symbol* element.

[options="header"]
|====
|Property             |Mandatory     |Default Value |Description
|`name`               |true          |none          |The name of the symbol
|`value`              |true          |none          |The value of the symbol
|`before-space`       |false         |false         |Whether or not a space is required before the symbol
|`after-space`        |false         |false         |Whether or not a space is required after the symbol
|`invalid-chars`      |false         |""            |A list of characters that are not allowed to represent the symbol. No spaces or punctuation between the characters.
|====

[[sample-setting-symbols]]
[suppress]
==== Sample symbol setting

Below is an example of how to configure a *symbols* section.
The first element specifies that periods must be expressed using "." and 
cannot be expressed using "。".
The second element specifies that commas must be expressed using ',' and
cannot be expressed using "、" or "，".
The third element specifies that exclamation marks must be expressed using '!'
and cannot be expressed using "！"
It also specifies that the symbol must not be followed by a space.

By setting *invalid-chars*, you can restrict which characters
can be used in documents.
For example, in Japanese both '.' and '。' can represent a period.


[source,xml]
----
<symbols>
    <symbol name="FULL_STOP" value="." invalid-chars="。" />
    <symbol name="COMMA" value="," invalid-chars="、，" />
    <symbol name="EXCLAMATION_MARK" value="!" after-space="false" />
</symbols>
----

[[default-settings-for-english]]
==== Default settings for English

The table below lists and explains the default symbol settings for files written in 
English and other Latin based languages.
The contents of each column are as follows:
[options="header"]
|====
|Column             |Description
|`name`               |The name of the symbol as defined in RedPen
|`value`              |The default character to represent the symbol
|`before-space`       |Whether or not a space is required before the symbol by default
|`after-space`        |Whether or not a space is required after the symbol by default
|`invalid-chars`        |Possible invalid variants of the symbol
|`Description`      |A description of the symbol
|====

[[default-symbol-settings-for-english]]
===== Default symbol settings
[options="header"]
|====
|name                        |value         |before-space    |after-space     |invalid-chars     |  Description
|`FULL_STOP`                   |'.'           |false              |true               |'．', '。'       |  Full stop/period
|`SPACE`                       |' '           |false              |false              |'　'             |  Single-byte space
|`EXCLAMATION_MARK`            |'!'           |false              |true               |'！'             |  Exclamation mark
|`NUMBER_SIGN`                 |'#'           |false              |false              |'＃'             |  Number sign/hash mark
|`DOLLAR_SIGN`                 |'$'           |false              |false              |'＄'             |  Dollar sign
|`PERCENT_SIGN`                |'%'           |false              |false              |'％'             |  Percent sign
|`QUESTION_MARK`               |'?'           |false              |true               |'？'             |  Question mark
|`AMPERSAND`                   |'&'           |false              |true               |'＆'             |  Ampersand
|`LEFT_PARENTHESIS`            |'('           |true               |false              |'（'             |  Left parenthesis
|`RIGHT_PARENTHESIS`           |')'           |false              |true               |'）'             |  Right parenthesis
|`ASTERISK`                    |'*'           |false              |false              |'＊'             |  Asterisk
|`COMMA`                       |','           |false              |true               |'、','，'        |  Comma
|`PLUS_SIGN`                   |'+'           |false              |false              |'＋'             |  Plus sign
|`HYPHEN_SIGN`                 |'-'           |false              |false              |'ー'             |  Hyphen/dash
|`SLASH`                       |'/'           |false              |false              |'／'             |  Slash
|`COLON`                       |':'           |false              |true               |'：'             |  Colon
|`SEMICOLON`                   |';'           |false              |true               |'；'             |  Semi-colon
|`LESS_THAN_SIGN`              |'<'           |false              |false              |'＜'             |  Less than sign
|`GREATER_THAN_SIGN`           |'>'           |false              |false              |'＞'             |  Greater than sign
|`EQUAL_SIGN`                  |'='           |false              |false              |'＝'             |  Equal sign
|`AT_MARK`                     |'@'           |false              |false              |'＠'             |  At mark
|`LEFT_SQUARE_BRACKET`         |'['           |true               |false              |                 |  Left square bracket
|`RIGHT_SQUARE_BRACKET`        |']'           |false              |true               |                 |  Right square bracket
|`BACKSLASH`                   |'\'           |false              |false              |                 |  Backslash
|`CIRCUMFLEX_ACCENT`           |'^'           |false              |false              |'＾'             |  Circumflex accent
|`LOW_LINE`                    |'_'           |false              |false              |'＿'             |  Underbar/underscore
|`LEFT_CURLY_BRACKET`          |'{'           |true               |false              |'｛'             |  Left curly bracket
|`RIGHT_CURLY_BRACKET`         |'}'           |true               |false              |'｝'             |  Right curly bracket
|`VERTICAL_BAR`                |'\|'           |false              |false              |'｜'             |  Vertical bar/pipe
|`TILDE`                       |'~'           |false              |false              |'〜'             |  Tilde
|`LEFT_SINGLE_QUOTATION_MARK`  |'''           |false              |false              |                 |  Left single quotation mark
|`RIGHT_SINGLE_QUOTATION_MARK` |'''           |false              |false              |                 |  Right single quotation mark
|`LEFT_DOUBLE_QUOTATION_MARK`  |'"'           |false              |false              |                 |  Left double quotation mark
|`RIGHT_DOUBLE_QUOTATION_MARK` |'"'           |false              |false              |                 |  Right double quotation mark
|====


[[default-settings-for-japanese]]
[suppress='DuplicateSection']
==== Default settings for Japanese

The table below lists and explains the default symbol settings for files written in Japanese.
[[default-symbol-settings-for-japanese]]
===== Default symbol settings
[options="header"]
|====
|name                        |value         |before-space    |after-space     |invalid-chars     |  Description
|`FULL_STOP`                   |'。'         | false            |  false             |  '．','.'         |  Full stop/period
|`SPACE`                       |'　'         | false            |  false             |                   |  Double-byte space
|`EXCLAMATION_MARK`            |'！'         | false            |  false             |  '!'              |  Exclamation mark
|`NUMBER_SIGN`                 |'＃'         | false            |  false             |  '#'              |  Number sign/hash mark
|`DOLLAR_SIGN`                 |'＄'         | false            |  false             |  '$'              |  Dollar sign
|`PERCENT_SIGN`                |'％'         | false            |  false             |  '%'              |  Percent sign
|`QUESTION_MARK`               |'？'         | false            |  false             |  '?'              |  Question mark
|`AMPERSAND`                   |'＆'         | false            |  false             |  '&'              |  Ampersand
|`LEFT_PARENTHESIS`            |'（'         | false            |  false             |  '('              |  Left parenthesis
|`RIGHT_PARENTHESIS`           |'）'         | false            |  false             |  ')'              |  Right parenthesis
|`ASTERISK`                    |'＊'         | false            |  false             |  '*'              |  Asterisk
|`COMMA`                       |'、'         | false            |  false             |  '，',','         |  Comma
|`PLUS_SIGN`                   |'＋'         | false            |  false             |  '+'              |  Plus sign
|`HYPHEN_SIGN`                 |'ー'         | false            |  false             |  '-'              |  Hyphen/dash
|`SLASH`                       |'／'         | false            |  false             |  '/'              |  Slash
|`COLON`                       |'：'         | false            |  false             |  ''              |  Colon
|`SEMICOLON`                   |'；'         | false            |  false             |  ''              |  Semi-colon
|`LESS_THAN_SIGN`              |'＜'         | false            |  false             |  ''              |  Less than sign
|`GREATER_THAN_SIGN`           |'＞'         | false            |  false             |  ''              |  Greater than sign
|`EQUAL_SIGN`                  |'＝'         | false            |  false             |  '='              |  Equal sign
|`AT_MARK`                     |'＠'         | false            |  false             |  '@'              |  At mark
|`LEFT_SQUARE_BRACKET`         |'「'         | true             |  false             |                   |  Left square bracket
|`RIGHT_SQUARE_BRACKET`        |'」'         | false            |  false             |                   |  Right square bracket
|`BACKSLASH`                   |'￥'         | false            |  false             |                   |  Backslash
|`CIRCUMFLEX_ACCENT`           |'＾'         | false            |  false             |  '^'              |  Circumflex accent
|`LOW_LINE`                    |'＿'         | false            |  false             |  '_'              |  Underbar/underscore
|`LEFT_CURLY_BRACKET`          |'｛'         | true             |  false             |  '{'              |  Left curly bracket
|`RIGHT_CURLY_BRACKET`         |'｝'         | true             |  false             |  '}'              |  Right curly bracket
|`VERTICAL_BAR`                |'｜'         | false            |  false             |  '\|'              |  Vertical bar/pipe
|`TILDE`                       |'〜'         | false            |  false             |  '~'              |  Tilde
|`LEFT_SINGLE_QUOTATION_MARK`  |'‘'          | false            |  false             |                   |  Left single quotation mark
|`RIGHT_SINGLE_QUOTATION_MARK` |'’'          | false            |  false             |                   |  Right single quotation mark
|`LEFT_DOUBLE_QUOTATION_MARK`  |'“'          | false            |  false             |                   |  Left double quotation mark
|`RIGHT_DOUBLE_QUOTATION_MARK` |'”'          | false            |  false             |                   |  Right double quotation mark
|====

[[japanese-symbol-validations]]
==== Japanese symbol variations

Different authors may use different symbols when writing in Japanese.
For this reason, RedPen provides three types of symbol setting for Japanese files.
You specify the type in the *variant* attribute of the *redpen-conf* element.
The allowed values of the *variant* attribute are as follows:
[options="header"]
|====
|Value             |Description
|`zenkaku`               |Standard Japanese symbol settings
|`zenkaku2`              |Standard Japanese symbol settings but with two exceptions (see table below)
|`hankaku`       |Standard English symbol settings (the same as if you use the English configuration file)
|====

[[zenkaku2-exceptions]]
===== Exceptions in zenkaku2
[options="header"]
|====
|name    |value |before-space |after-space |invalid-chars |Description
|FULL_STOP |'．'  |false           |false          |' .', '。'   |Full stop/period
|COMMA     |'，'  |false           |false          |',','、'     |Comma
|====
The following is an example of how to set the *variant* attribute with a value of *zenkaku2*:

[source,xml]
----
<redpen-conf lang="ja" variant="zenkaku2">
    <validators>
        <validator name="InvalidSymbol" />
        <validator name="SpaceWithSymbol" />
        <validator name="SectionLength" />
        <validator name="ParagraphNumber" />
    </validators>
</redpen-conf>
----

